From 9082b42b45f9bb926189aba875a8a62c54bfb1b8 Mon Sep 17 00:00:00 2001
From: Remi Collet <fedora@famillecollet.com>
Date: Fri, 16 Sep 2016 15:31:23 +0200
Subject: [PATCH] ensure correct ODBCVER is used

---
 source/pdo_sqlsrv/xplat.h | 4 ++++
 source/sqlsrv/xplat.h     | 4 ++++
 2 files changed, 8 insertions(+)

diff --git a/source/pdo_sqlsrv/xplat.h b/source/pdo_sqlsrv/xplat.h
index bede13c..3408f00 100644
--- a/source/pdo_sqlsrv/xplat.h
+++ b/source/pdo_sqlsrv/xplat.h
@@ -228,6 +228,10 @@ typedef windowsULongLong_t ULONGLONG;
 #define UNIXODBC
 #endif
 
+/* can be defined in php sources */
+#ifdef  ODBCVER
+#undef  ODBCVER
+#endif
 // Build the mplat driver as an ODBC 3.8 driver, so that all of the
 // source code shared with Windows SNAC (which is ODBC 3.8) compiles.
 #define ODBCVER 0x0380
diff --git a/source/sqlsrv/xplat.h b/source/sqlsrv/xplat.h
index bede13c..3408f00 100644
--- a/source/sqlsrv/xplat.h
+++ b/source/sqlsrv/xplat.h
@@ -228,6 +228,10 @@ typedef windowsULongLong_t ULONGLONG;
 #define UNIXODBC
 #endif
 
+/* can be defined in php sources */
+#ifdef  ODBCVER
+#undef  ODBCVER
+#endif
 // Build the mplat driver as an ODBC 3.8 driver, so that all of the
 // source code shared with Windows SNAC (which is ODBC 3.8) compiles.
 #define ODBCVER 0x0380
